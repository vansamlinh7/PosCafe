<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.80.0">
    <title>Dashboard Template · Bootstrap v4.6</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/4.6/examples/dashboard/">
    <!-- Bootstrap core CSS -->
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link th:href="@{/css/bootstrap-tagsinput.css}" rel="stylesheet">

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
      .img-hover:hover{
      transform: scale(1.1);
      }

ul, #myUL {
  list-style-type: none;
}

#myUL {
  margin: 0;
  padding: 0;
}

.caret {
  cursor: pointer;
  -webkit-user-select: none; /* Safari 3.1+ */
  -moz-user-select: none; /* Firefox 2+ */
  -ms-user-select: none; /* IE 10+ */
  user-select: none;
}

.caret::before {
  content: "\25B6";
  color: black;
  display: inline-block;
  margin-right: 6px;
}

.caret-down::before {
  -ms-transform: rotate(90deg); /* IE 9 */
  -webkit-transform: rotate(90deg); /* Safari */'
  transform: rotate(90deg);
}

.nested {
  display: none;
}

.active {
  display: block;
}
 .bg-focus {
            background: #dddfe0;
            border-radius: 5px;
            padding-top: 2px;
            padding-bottom: 2px;
            padding-left: 5px;
            padding-right: 5px;
        }
#treeNhomHang span {
            cursor: pointer;
        }

.img-hover:hover{
      transform: scale(1.1);
      }


  input , select, .bootstrap-tagsinput {
        border-top-style: hidden !important;
        border-right-style: hidden !important;
        border-left-style: hidden !important;
        box-shadow: none !important;
        border-radius: 0px;
        padding-left: 0px !important;
      }
  input:focus, select:focus{
        border-top-style: hidden !important;
        border-right-style: hidden !important;
        border-left-style: hidden !important;
        box-shadow: none !important;
  }
  .bootstrap-tagsinput {
    display: block;
}
   .bootstrap-tagsinput .tag {
        background: #0572e6;
        border-radius: 7px;
        padding: 2px 5px 3px 7px;
        margin:2px;
   }

.div-input{
    position:relative;
}
.div-input label{
    position: absolute;
    top:12px;
    transition: .5s;
    pointer-events: none;
    font-size: 12px;

}
.div-input input:focus ~ label,
.div-input input:valid ~ label{
    top:-5px;
    font-size: 10px;
    color: #0572e6;
}
.div-input input:focus,
.div-input input:valid{
    border-bottom-color: #0572e6;
}












    </style>
    <!-- Custom styles for this template -->
    <link th:href="@{/css/dashboard.css}" rel="stylesheet">

</head>
<body>
<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">Fasttrack CaFe</a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-toggle="collapse"
            data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowrap">
            <a class="nav-link" href="#">Sign out</a>
        </li>
    </ul>
</nav>


<div class="container-fluid">
    <div class="row">

        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-secondary sidebar collapse">
            <div class="sidebar-sticky pt-3 ">
            </div>
        </nav>
        <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4 bg-light my-2" aria-live="polite"
              aria-atomic="true"
              style="position: relative; min-height: 200px;">
            <!--  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
                  <h1 class="h2">Sản Phẩm</h1>
                  <div class="btn-toolbar mb-2 mb-md-0">
                      <button id="btnAddNhomHang" type="button" class="btn btn-sm btn-outline-primary m-1">Thêm Nhóm
                      </button>
                      <button id="btnUpdateNhom" type="button" class="btn btn-sm btn-outline-info m-1">Sửa Nhóm</button>
                      <button onclick="deleteNhomHang()" type="button" class="btn btn-sm btn-outline-danger m-1">Xóa
                          Nhóm
                      </button>
                      <button type="button" class="btn btn-sm btn-outline-warning m-1">Cập Nhật</button>
                      <button type="button" class="btn btn-sm btn-outline-secondary m-1">ĐVT Khác</button>
                      <button id="btnAddSanPham" type="button" class="btn btn-sm btn-outline-primary m-1">Thêm SP</button>
                      <button type="button" class="btn btn-sm btn-outline-info m-1">Chuyển SP</button>
                      <button type="button" class="btn btn-sm btn-outline-danger m-1">Xóa SP</button>
                      <button type="button" class="btn btn-sm btn-outline-warning m-1">Thành Phần</button>

                  </div>
              </div>-->

            <form th:action="@{/them-san-pham}" th:object="${sp}" method="post" class="">

                <div class="row bg-white shadow  rounded p-3 my-2 mx-md-5">
                    <div class="col-md-12">
                        <div class="h5 text-success">Thông tin cơ bản</div>
                    </div>
                    <hr>
                    <div class="col-md-2 ">
                        <div class="text-center">
                            <img src="/images/camera.png" class="rounded img-thumbnail" alt="...">
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group ">
                            <input type="text" th:field="*{tenSP}"
                                   class="form-control p-0" maxlength="20"
                                   placeholder="tên hàng hóa, dịch vụ" onfocus="this.placeholder = ''"
                                   onblur="this.placeholder = 'Tên hàng hóa/ dịch vụ'">
                        </div>
                        <div class="form-group ">
                            <select th:field="*{maDVT}"
                                    class="form-control p-0">
                                <option th:each="i : ${listNH}" th:value="${i.maNhom}" th:text="${i.tenNhom}">
                                    Hàng
                                    Hóa
                                </option>
                            </select>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6">
                                <label>Tồn kho hiện tại</label>
                                <input type="number"
                                       class="form-control p-0" maxlength="20"
                                       placeholder="0" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '0'">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="form-group">
                            <input type="text" th:field="*{maSP}"
                                   class="form-control p-0" maxlength="20"
                                   placeholder="mã sản phẩm    " onfocus="this.placeholder = ''"
                                   onblur="this.placeholder = 'Nã sản phẩm'">
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control p-0"
                                   maxlength="20"
                                   placeholder="nhà sản xuât   " onfocus="this.placeholder = ''"
                                   onblur="this.placeholder = 'Nhà sản xuất'">
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-6">
                                <label>Cảnh báo khi tồn kho nhỏ hơn</label>
                                <input type="number" class="form-control p-0"
                                       maxlength="20"
                                       placeholder="0" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '0'">
                            </div>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input">
                            <label class="form-check-label" style="user-select:none">
                                Cho phép bán khi tồn khô không đủ?
                            </label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input">
                            <label class="form-check-label" style="user-select:none">
                                Hiện ra màn hình POS ?
                            </label>
                        </div>
                    </div>
                </div>

                <div class="row bg-white shadow  rounded p-3 my-2 mx-md-5">
                    <div class="col-md-12">
                        <div class="h5 text-success">Giá hàng hóa/dịch vụ</div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group row justify-content-md-center">
                            <div class="col-sm-6">
                                <label>Giá nhập</label>
                                <input id="giaVon" type="number" class="form-control p-0"
                                       maxlength="20"
                                       placeholder="0" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '0'">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group row justify-content-md-center">
                            <div class="col-sm-6">
                                <label>% Tăng thêm</label>
                                <input id="giaTangThem" readonly type="text" class="form-control p-0"
                                       maxlength="20"
                                       placeholder="0" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '0'">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group row justify-content-md-center">
                            <div class="col-sm-6">
                                <label>Giá bán</label>
                                <input id="giaBan" type="number" class="form-control  p-0"
                                       maxlength="20"
                                       placeholder="0" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '0'">
                            </div>
                        </div>
                    </div>

                </div>
                <div class="row bg-white shadow  rounded p-3 my-2 mx-md-5">
                    <div class="col-md-3">
                        <div class="h6">Thuộc tính</div>
                        <div class="text-mute">Tên thuộc tính</div>
                        <input type="text" class="form-control  p-0">
                    </div>
                    <div class="col-md-9">
                        <div class="h6  "> Giá Trị</div>
                        <div class="text-mute">Nhập giá trị và enter</div>
                        <input type="text" value="" id="giaTri" data-role="tagsinput" class="form-control p-0">
                    </div>
                    <div class="col-md-12 mt-3">
                        <div class="row">
                            <table class="table">
                                <thead>
                                <tr>
                                    <th scope="col-md-3" class="border-top-0">Tên hàng hóa</th>
                                    <th scope="col-md-2" class="border-top-0">Mã hàng hóa</th>
                                    <th scope="col-md-2" class="border-top-0">Giá vốn</th>
                                    <th scope="col-md-2" class="border-top-0">Giá Bán</th>
                                    <th scope="col-md-2" class="border-top-0">Số Lượng</th>
                                    <th scope="col-md-1" class="border-top-0">xx</th>
                                </tr>
                                </thead>
                                <tbody id="dsThuocTinh">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12  text-right mt-2">
                        <button type="button" class="btn btn-primary">Cancel</button>
                        <button type="button" class="btn btn-warning">Save</button>
                    </div>
                </div>


                <!-- <div class="card">
                     <div class="card-body">
                         <div class="form-row">
                             <div class="form-group col-md-2">
                                 <label>Tên thuộc tính</label>
                                 <input placeholder="Tên hàng hóa dịch vụ *" type="text" class="form-control">
                             </div>
                             <div class="form-group col-md-10">
                                 <label>Nhập giá trị và enter</label></br>
                                 <input id="giaTri" type="text" value="" data-role="tagsinput" >

                             </div>
                         </div>

                         <div class="form-row font-weight-bold">
                             <div class="form-group col-md-4">
                                 <label>Tên hàng hóa</label>
                             </div>

                             <div class="form-group col-md-3">
                                 <label>Giá vốn</label>
                             </div>
                             <div class="form-group col-md-2">
                                 <label>Giá bán</label>
                             </div>
                             <div class="form-group col-md-2">
                                 <label>Số lượng</label>
                             </div>
                             <div class="form-group col-md-1">
                                 <label></label>
                             </div>
                         </div>
                         <div class="ds-thuoc-tinh-con">

                         </div>
                     </div>
                 </div>
 -->

            </form>


        </main>
    </div>
</div>

<script th:src="@{/js/bootstrap.bundle.min.js}"></script>

<script th:src="@{/js/dashboard.js}"></script>
<script th:src="@{/js/bootstrap-tagsinput.js}"></script>
<script>

    $('#giaTri').tagsinput();
    var tenSP="";
    var giaVon = 0;
    var giaBan = 0;

    $(document).ready(function(){
        $('#giaVon , #giaBan').keyup(function(){

            if($('#giaVon').val != 0 && $('#giaBan').val !=0){
                giaVon = $('#giaVon').val();
                giaBan = $('#giaBan').val();
                var tang = (giaBan-giaVon)/giaVon * 100 ;
                $('#giaTangThem').val(tang.toFixed(2) +"%");
            }
        });
    });

    $('#giaTri').on('beforeItemAdd', function(event) {
        tenSP = $('#tenSP').val();
        giaVon = $('#giaVon').val();
        giaBan = $('#giaBan').val();
        $('#dsThuocTinh').append(itemThuocTinh(event.item, event.item.replace(/\s/g, ''), tenSP, giaVon, giaBan));
    });

    $('#giaTri').on('itemRemoved', function(event) {
        $('#dsThuocTinh #' +event.item.replace(/\s/g, '')).empty();
    });


    function itemThuocTinh(name, id, tenSP, giaVon, giaBan ) {
        return`
             <tr id="${id}">
                <th class="h6">${tenSP} [${name}]</th>
                <td>
                    <div class="div-input">
                       <input class="form-control p-0 rounded-0" type="text" name="" required="" value="${id}">
                       <label>Mã hàng hóa</label>
                    </div>
                </td>
                <td>
                    <div class="div-input">
                       <input class="form-control p-0 rounded-0" type="number" name="" required="" value="${giaVon}">
                       <label>Giá vốn</label>
                    </div>
                </td>
                <td>
                    <div class="div-input">
                       <input class="form-control p-0 rounded-0" type="number" name="" required="" value="${giaBan}">
                       <label>Giá bán</label>
                    </div>
                </td>
                <td>
                    <div class="div-input">
                       <input class="form-control p-0 rounded-0" type="number" name="" required="">
                       <label>Số lượng</label>
                    </div>
                </td>
                <td>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="true">
                    </div>
                </td>
             </tr>
        `;
    }






</script>
</body>

</html>
